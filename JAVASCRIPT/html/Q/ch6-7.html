<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            font-size: 25px;
            text-align: center;
        }
    </style>
</head>
<body>
    <table border="1">
        <thead>
            <tr><th colspan="7"><input type="date" name="selectDate" id="selectDate"></th></tr>
            <tr>
                <th><input type="button" value="<" id="leftMonth"></th>
                <th id="ym" colspan="5"><!-- YYYY년 MM월 --></th>
                <th><input type="button" value=">" id="rightMonth"></th>
            </tr>
            <tr><th>일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th></tr>
        </thead>
        <tbody>
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr> <!-- 0~6 -->
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr> <!-- 7~13 -->
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr> <!-- 14~20 -->
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr> <!-- 21~27 -->
            <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr> <!-- 28~34 -->
            <tr id="last"><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr> <!-- 35~41 -->
        </tbody>
    </table>

    <script>

        var date = document.getElementById('selectDate');
        var tbody = document.getElementsByTagName('tbody')[0];
        var td = document.getElementsByTagName('td');
        var tday = new Date();
        var year = tday.getFullYear();
        var month = tday.getMonth()+1;
        document.getElementById('ym').innerHTML = year+'년 '+month+'월';
        tday.setDate(1);
        var index =  tday.getDay();
        console.log(index);
        day(index, year, month);

        var left = document.getElementById('leftMonth');
        var right = document.getElementById('rightMonth');
        
        left.addEventListener('click', function(e){
            var a = date.value;
            var a2 = a.split('-');
            var a3 = Number(a2[1])-1;
            var a4 = String(a3);
            if(a3%10==0){
                date.value = a2[0]+'-'+'0'+a4+'-'+a2[2];
            }else{
                date.value = a2[0]+'-'+a4+'-'+a2[2];
            }
            

        }, false);

        
        right.addEventListener('click', function(e){
            tday.setMonth(tday.getMonth()+2);
        }, false);

        date.addEventListener('change', function sd(e){
            var a = e.currentTarget.value;
            var val = a.split('-');
            year = val[0];
            month = val[1];
            document.getElementById('ym').innerHTML = year+'년 '+month+'월';

            var a2 = new Date(a);
            a2.setDate(1);
            index = a2.getDay();

            day(index, year, month);
        }, false);


        function day(idx, y, m){
            var max;
            if(y%4==0 && m==2){
                max = 29;
            }else if(m==2){
                max = 28;        
            }else if((m<=7 && m%2==0) || (m>=8 && m%2==1)){
                max = 30;
            }else{
                max = 31;
            }

            if(idx+max<=35){
                var last=document.getElementById('last');
                last.setAttribute('style', 'display:none;');
            }else{
                var last=document.getElementById('last');
                last.setAttribute('style', 'display:table-row;');
            }
            for(var i=0;i<td.length;i++){
                td[i].innerHTML="";
            }
            for(var i=0;i<max;i++){
                td[i+idx].innerHTML = i+1;
                console.log(i+idx);
            }
        }
    </script>
</body>
</html>